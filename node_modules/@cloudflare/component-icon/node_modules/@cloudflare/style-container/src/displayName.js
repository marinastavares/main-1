import getReactDisplayName from 'react-display-name';

// create displayName function for a component (WrappedComponent) which is wrapped
// by a HOC.
// hocType can be either a string (such as 'div') or a React Component
export const hocDisplayName = hocType => WrappedComponent => {
  let displayName = '';
  try {
    displayName = getReactDisplayName(WrappedComponent);
  } catch (ex) {
    if (process.env.NODE_ENV !== 'production') {
      console.error(`can't get displayName, exception: ${ex}`);
    }
  }
  return `${hocType}(${displayName})`;
};

// Add displayName to a Component
// In addition adds setDisplayName function for setting proper display after HOC is created.
export const addDisplayName = (HOC, WrappedComponent, getDisplayName) => {
  HOC.displayName = getDisplayName(WrappedComponent);
  HOC.setDisplayName = displayName => {
    HOC.displayName = getDisplayName(displayName);
  };

  return HOC;
};
