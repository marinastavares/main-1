"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _isValidElementProp = _interopRequireDefault(require("./isValidElementProp"));

var _reactFela = require("react-fela");

var _reactDisplayName = _interopRequireDefault(require("react-display-name"));

var _types = require("./types");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var EMPTY_PASSTHROUGH_PROPS = []; // the order of these overloads is important to allow the compiler to
// correctly resolve to the right function signature

function createComponent(rule, base, passthroughProps) {
  var _base = base !== null && base !== void 0 ? base : 'div';

  var Component = (0, _reactFela.createComponent)(rule, _base, passthroughProps !== null && passthroughProps !== void 0 ? passthroughProps : _base._isFelaComponent ? // fela merges the passthrough props of nested style components,
  // so if we're wrapping another style component we want to defer
  // determining passthrough props to a leaf-level component
  EMPTY_PASSTHROUGH_PROPS : typeof _base !== 'string' ? // A plain React component
  // (React component -> pass through all props)
  _types.objectKeys : // a DOM element
  // (string -> dom element's acceptable props)
  function (props) {
    return (0, _types.objectKeys)(props).filter(function (prop) {
      return (0, _isValidElementProp.default)(_base, prop);
    });
  });
  Component.displayName = (0, _reactDisplayName.default)(_base);
  return Component;
}

var _default = createComponent;
exports.default = _default;